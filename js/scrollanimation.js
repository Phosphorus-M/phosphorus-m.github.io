document.addEventListener("DOMContentLoaded",(function(){var e,t,n;function r(){n&&clearTimeout(n),n=setTimeout((function(){var t=document.body.scrollTop;e.forEach((function(n){var r;n.getBoundingClientRect().top<window.innerHeight+t+500&&(r=n.getAttribute("data-url"),n.setAttribute("src",r),n.classList.remove("preload"),n.parentElement.parentElement.parentElement.classList.add("animate"),n.parentElement.parentElement.parentElement.classList.remove("animate"),n.parentElement.parentElement.parentElement.classList.add("shown"),e=document.querySelectorAll(".thumbnail.preload"),masonry.layout())})),0==e.length&&(document.removeEventListener("scroll"),window.removeEventListener("resize"))}),20)}"IntersectionObserver"in window?(e=document.querySelectorAll(".thumbnail.preload"),t=new IntersectionObserver((function(e,n){console.log(n,e),e.forEach((function(e){e.isIntersecting&&((e=e.target).src=e.dataset.url,e.classList.remove("preload"),console.log(e.parentElement.parentElement.parentElement),e.parentElement.parentElement.parentElement.classList.add("animate"),e.parentElement.parentElement.parentElement.classList.remove("animate"),e.parentElement.parentElement.parentElement.classList.add("shown"),t.unobserve(e),masonry.layout())}))})),e.forEach((function(e){t.observe(e)}))):(e=document.querySelectorAll(".thumbnail.preload"),document.addEventListener("scroll",r),window.addEventListener("resize",r))}));